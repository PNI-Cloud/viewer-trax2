(this.webpackJsonpstudio=this.webpackJsonpstudio||[]).push([[0],{71:function(e,t,n){},86:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(24),c=n.n(i),o=(n(71),n(13)),s=n(12),l=n(130),u=n(129),d=n(128),f=n(55),b=(n(86),n(33)),h=n(34),j=function(){function e(t){Object(b.a)(this,e),this.maxLength=void 0,this.buffer=void 0,this.partial=void 0,this.maxLength=t,this.buffer=[],this.partial=new Uint8Array}return Object(h.a)(e,[{key:"validate",value:function(e){if(e[1]===e.length)return!0}},{key:"add",value:function(e){var t=this.validate(e)?e:void 0;if(!t){var n=new Uint8Array([].concat(Object(o.a)(this.partial),Object(o.a)(e)));this.validate(n)&&(t=n)}if(t)for(this.buffer.push(t);this.buffer.length>this.maxLength;)this.buffer.shift();else this.partial=e}}]),e}(),v=n(2);var p=function(){var e,t=Object(r.useState)(),n=Object(s.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(),b=Object(s.a)(c,2),h=b[0],p=b[1],O=Object(r.useState)(),x=Object(s.a)(O,2),g=x[0],m=x[1],w=Object(r.useRef)(),y=Object(r.useReducer)((function(e){return e+1}),0),k=Object(s.a)(y,2),S=(k[0],k[1]),U=Object(r.useRef)(),A=function(e){for(var t=0,n=0,r=e.length-1;r>=0;r--)n=n>>8|n<<8,n^=e[t++],n^=(255&n)>>4,n^=n<<8<<4,n^=(255&n)<<4<<1;return Uint8Array.from([].concat(Object(o.a)(e),[(65280&n)>>8,255&n]))};function I(e){return Object(o.a)(e).map((function(e){return e.toString(16).padStart(2,"0")})).join(" ")}return Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("wsUrl"),t=e||"ws://localhost:8088",n=new f.NstrumentaClient({apiKey:"",projectId:"",wsUrl:t});U.current=n,w.current=new j(100),console.log("connecting to ",t),n.addListener("open",(function(){console.log("nst client open"),n.subscribe("serialport-events",(function(e){if(console.log("serialport-events",e),"open"===e.type)i("open")})),n.subscribe("trax2",(function(e){var t;"open"!==a&&i("open"),null===(t=w.current)||void 0===t||t.add(new Uint8Array(e.data)),S(),console.log("trax2",e);var n=e.data[2];switch(n){case 2:var r=(new TextDecoder).decode(new Uint8Array(e.data.slice(3,-2)));console.log(JSON.stringify(e),r),p(r);break;case 5:console.log("data");break;default:console.log("unhandled frame ID: ".concat(n),e)}}))})),n.init()}),[]),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)(l.a,{container:!0,spacing:2,children:[Object(v.jsxs)(l.a,{item:!0,xs:12,children:[Object(v.jsx)(u.a,{variant:"contained",onClick:function(){if(U.current){var e=A([0,5,1]);console.log("sending kGetModInfo",e),U.current.sendBuffer("trax-in",e)}},children:"kGetModInfo"}),h]}),Object(v.jsx)(l.a,{item:!0,xs:4,children:Object(v.jsx)(d.a,{id:"outlined-basic",label:"[0x00,0x05,0x01]",variant:"outlined",onChange:function(e){console.log(e.target.value);try{var t=e.target.value.replace("[","").replace("]","").split(",").map((function(e){return Number(e)})),n=A(t);console.log(n),m(n)}catch(r){}}})}),Object(v.jsx)(l.a,{item:!0,xs:3,children:g?I(g):null}),Object(v.jsx)(l.a,{item:!0,xs:1,children:Object(v.jsx)(u.a,{variant:"contained",onClick:function(){var e;g&&(e=g,U.current&&U.current.sendBuffer("trax-in",e))},children:"Send"})})]}),Object(v.jsx)("div",{style:{width:"100%",whiteSpace:"pre-line"},children:null===(e=w.current)||void 0===e?void 0:e.buffer.reverse().map((function(e){return I(e)})).join("\n")})]})};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(p,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.a4fa6022.chunk.js.map